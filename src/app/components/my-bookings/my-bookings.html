<div>
  <div>
    <h2>My Bookings</h2>
    <a routerLink="/search">Book New Flight</a>
  </div>

  <div *ngIf="loading">
    <p>Loading your tickets...</p>
  </div>

  <div *ngIf="error">
    {{ error }}
  </div>

  <div *ngIf="!loading && bookings.length === 0">
    <h4>No bookings found yet.</h4>
    <p>Ready to travel?</p>
    <a routerLink="/search">Search Flights</a>
  </div>

  <div *ngIf="!loading && bookings.length > 0">
    <table>
      <thead>
        <tr>
          <th>PNR</th>
          <th>Flight</th>
          <th>Date</th>
          <th>Passengers</th>
          <th>Status</th>
          <th>Action</th>
        </tr>
      </thead>

      <tbody>
        <tr *ngFor="let b of bookings">
          <td>{{ b.pnr }}</td>
          <td>{{ b.flightId }}</td>
          <td>{{ b.journeyDate | date:'mediumDate' }}</td>
          <td>{{ b.numberOfSeats }}</td>
          <td>{{ b.bookingStatus }}</td>
          <td>
            <button
              *ngIf="b.bookingStatus !== 'CANCELLED'"
              (click)="cancelTicket(b.pnr)">
              Cancel
            </button>

            <span *ngIf="b.bookingStatus === 'CANCELLED'">
              Refunded
            </span>
          </td>
        </tr>
      </tbody>
    </table>
  </div>
</div>
