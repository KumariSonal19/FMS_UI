<div class="search-page-wrapper fade-in">
  
  <div class="page-header">
    <h2 class="header-title">Find Your Next Adventure</h2>
    <p class="header-subtitle">Search available flights across our global network.</p>
  </div>

  <div class="search-layout">
    
    <div class="search-sidebar">
      <div class="filter-card">
        <h5 class="filter-title">
          Search Filter
        </h5>
        
        <form [formGroup]="searchForm" (ngSubmit)="onSearch()">
          <div class="form-group">
            <label class="custom-label">From</label>
            <select class="custom-select" formControlName="source" [class.is-invalid]="submitted && f['source'].errors">
              <option value="">Select Departure</option>
              @for (airport of airports; track airport.code) {
                <option [value]="airport.code">{{ airport.name }}</option>
              }
            </select>
          </div>

          <div class="form-group">
            <label class="custom-label">To</label>
            <select class="custom-select" formControlName="destination" [class.is-invalid]="submitted && f['destination'].errors">
              <option value="">Select Arrival</option>
              @for (airport of airports; track airport.code) {
                <option [value]="airport.code">{{ airport.name }}</option>
              }
            </select>
          </div>

          <div class="form-group-last">
            <label class="custom-label">Date</label>
            <input type="date" class="custom-input" formControlName="departureDate" [min]="minDate" [class.is-invalid]="submitted && f['departureDate'].errors">
          </div>

          @if (error) {
            <div class="error-alert">{{ error }}</div>
          }

          <button type="submit" class="btn-search w-100" [disabled]="loading">
            @if (loading) { <span class="spinner"></span> }
            Search Flights
          </button>
        </form>
      </div>
    </div>

    <div class="search-results">
      
      @if (!searched && !loading) {
        <div class="empty-state-card">
          <div class="empty-state-content">
            <div class="empty-icon"></div>
            <h5 class="empty-title">Ready for takeoff?</h5>
            <p class="empty-text">Select your route to see available flights.</p>
          </div>
        </div>
      } 
      
      @else if (searched && flights.length === 0 && !loading) {
        <div class="no-results-alert">
          <span class="no-results-icon"></span>
          <div>
            <h6 class="no-results-title">No flights found</h6>
            <p class="no-results-text">We couldn't find any flights for this route and date.</p>
          </div>
        </div>
      } 
      
      @else if (flights.length > 0) {
        <div class="flight-list">
          @for (flight of flights; track flight.flightId) {
            <div class="flight-card">
              <div class="flight-card-body">
                
                <div class="fc-section airline-section">
                  <div class="airline-badge">{{ flight.airlineCode }}</div>
                  <div class="airline-details">
                    <div class="airline-name">{{ flight.airlineName }}</div>
                  </div>
                </div>

                <div class="fc-section route-section">
                  <div class="time-group text-left">
                    <div class="time-large">{{ flight.departureTime | date:'HH:mm' }}</div>
                    <div class="location-small">{{ flight.source }}</div>
                  </div>
                  
                  <div class="route-graphic">
                    <div class="dashed-line"></div>
                    <div class="route-label">Direct</div>
                  </div>

                  <div class="time-group text-right">
                    <div class="time-large">{{ flight.arrivalTime | date:'HH:mm' }}</div>
                    <div class="location-small">{{ flight.destination }}</div>
                  </div>
                </div>

                <div class="fc-section action-section">
                  <div class="price-tag">â‚¹{{ flight.price }}</div>
                  

                  <button class="btn-book" (click)="bookFlight(flight)" [disabled]="flight.availableSeats === 0">
                    {{ flight.availableSeats === 0 ? 'Sold Out' : 'Book Now' }}
                  </button>
                </div>

              </div>
            </div>
          }
        </div>
      }
    </div>
  </div>
</div>